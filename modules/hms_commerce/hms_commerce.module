<?php
/**
 * @file
 *
 * Module file containing HMS Commerce hooks.
 */

/**
 * Implements hook_library_info_alter.
 *
 * @param $libraries
 * @param $extension
 *
 * Adds a JS library with dynamic source according to module settings.
 */
function hms_commerce_library_info_alter(&$libraries, $extension) {
  if ($extension == 'hms_commerce') {
    $api_source = \Drupal::config('hms_commerce.settings')->get('api_source');
    if (!empty($api_source)) {
      $libraries['products']['js'][$api_source . '/digtap/widgets.min.js'] = [
        'type' => 'external', 'minified' => TRUE];
    }
  }
}
